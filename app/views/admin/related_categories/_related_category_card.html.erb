<%# Renders a single related category row %>
<% show_actions = true if show_actions.nil? %>

<tr class="hover:bg-gray-50 text-sm">
  <td class="px-4 py-2">
    <input
      type="checkbox"
      value="<%= related_category.id %>"
      class="accent-gray-700"
      data-action="change->related-categories-index#selectRow"
      data-related-categories-index-target="rowCheckbox"
    >
  </td>
  <td class="px-4 py-2 font-medium text-gray-900">
    <%= link_to admin_related_category_path(related_category.category) do %>
      <%= related_category.category.title %>
      <% if related_category.category.is_root? %>
        <span class="inline-block ml-1 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800">Root</span>
      <% else %>
        <span class="inline-block ml-1 px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-800">Child</span>
      <% end %>
    <% end %>
  </td>
  <td class="px-4 py-2 font-medium text-gray-900">
    <%= link_to admin_related_category_path(related_category.category) do %>
    <%= related_category.related_category.title %>
      <% if related_category.related_category.is_root? %>
        <span class="inline-block ml-1 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800">Root</span>
      <% else %>
        <span class="inline-block ml-1 px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-800">Child</span>
      <% end %>
    <% end %>
  </td>
  <td class="px-4 py-2 text-gray-700">
    <span class="inline-block px-2 py-1 text-xs rounded font-medium <%= weight_badge_classes(related_category.weight) %>">
      <%= related_category.weight %>
    </span>
  </td>
  <td class="px-4 py-2 text-gray-700">
    <% if related_category.category.is_root? && related_category.related_category.is_root? %>
      <span>Root ↔ Root</span>
    <% elsif related_category.category.is_root? || related_category.related_category.is_root? %>
      <span>Root ↔ Child</span>
    <% else %>
      <span>Child ↔ Child</span>
    <% end %>
  </td>
  <td class="px-4 py-2 text-gray-700"><%= format_datetime(related_category.created_at) %></td>
  <% if show_actions %>
    <td class="px-4 py-2 text-right">
      <div class="flex items-center gap-2 justify-end">
        <%= render_action_button(edit_admin_related_category_path(related_category), icon: 'edit', type: :edit) %>
        <%= render_action_button(admin_related_category_path(related_category), icon: 'delete', type: :delete, confirm_message: 'Are you sure you want to delete this category?') %>
      </div>
    </td>
  <% end %>
</tr>
