
<div class="flex flex-col gap-4">
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
    <div>
      <h1 class="text-2xl font-bold">Products</h1>
      <nav class="text-sm breadcrumbs mt-1">
        <ol class="inline-flex items-center space-x-1">
          <li><a href="/admin" class="text-gray-500 hover:text-gray-700">Admin</a></li>
          <li>/</li>
          <li><%= link_to "Related Categories", admin_related_categories_path, class: "text-gray-500 hover:text-gray-700" %></li>
          <li>/</li>
          <li class="text-gray-900">Relationship <%= @related_category.category.title %> ↔ <%= @related_category.related_category.title %></li>
        </ol>
      </nav>
    </div>
  </div>
  <div class="max-full mx-auto mt-4 space-y-4">
    <div class="title-wrapper flex gap-4">
      <%= link_to admin_products_path, class: "btn btn-secondary bg-white border border-gray-200 hover:bg-gray-100 rounded-lg" do %>
        <span class="material-icons px-2 py-1 text-gray-950 text-base!">chevron_left</span>
      <% end %>
      <div class="title-wrapper flex justify-between w-full gap-4">
        <h1 class="text-2xl font-bold">Relationship <%= @related_category.category.title %> ↔ <%= @related_category.related_category.title %></h1>
        <div class="buttons-wrapper flex gap-2 items-center">
        <%= link_to edit_admin_related_category_path(@related_category), class: "btn btn-xs border border-sky-100 text-sky-500 hover:border-sky-200 hover:text-sky-700 px-2 py-1 rounded flex items-center justify-center", title: "Edit", "aria-label": "Edit" do %>
          <span class="material-icons text-sm!" aria-hidden="true">edit</span>
        <% end %>
        <%= button_to admin_related_category_path(@related_category), method: :delete, form: { "data-action": "categories-index#confirmDelete", "data-category-id": @related_category.id }, class: "btn btn-xs border border-red-100 text-red-700 hover:border-red-200 px-2 py-1 rounded flex items-center justify-center cursor-pointer", data: { turbo_confirm: "Are you sure you want to delete this category?" }, title: "Delete", "aria-label": "Delete" do %>
          <span class="material-icons text-sm! text-red-600" aria-hidden="true">delete</span>
        <% end %>
        </div>
      </div>
    </div>
  <div class="max-w-screen-lg mx-auto bg-white border border-gray-200 rounded-lg mt-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
      <div class="space-y-4">
        <div>
          <span class="font-semibold text-gray-700">Category:</span>
          <div class="mt-1">
            <span class="text-lg"><%= @related_category.category.title %></span>
            <% if @related_category.category.is_root? %>
              <span class="inline-block ml-2 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800">Root</span>
            <% else %>
              <span class="inline-block ml-2 px-2 py-0.5 text-xs rounded bg-green-100 text-green-800">Child</span>
            <% end %>
          </div>
          <% if @related_category.category.description.present? %>
            <p class="text-sm text-gray-600 mt-1"><%= @related_category.category.description %></p>
          <% end %>
        </div>

        <div>
          <span class="font-semibold text-gray-700">Related Category:</span>
          <div class="mt-1">
            <span class="text-lg"><%= @related_category.related_category.title %></span>
            <% if @related_category.related_category.is_root? %>
              <span class="inline-block ml-2 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800">Root</span>
            <% else %>
              <span class="inline-block ml-2 px-2 py-0.5 text-xs rounded bg-green-100 text-green-800">Child</span>
            <% end %>
          </div>
          <% if @related_category.related_category.description.present? %>
            <p class="text-sm text-gray-600 mt-1"><%= @related_category.related_category.description %></p>
          <% end %>
        </div>
      </div>

      <div class="space-y-4">
        <div>
          <span class="font-semibold text-gray-700">Weight:</span>
          <span class="ml-2 inline-block px-3 py-1 text-sm rounded font-medium <%= weight_badge_classes(@related_category.weight) %>"><%= @related_category.weight %></span>
        </div>

        <div>
          <span class="font-semibold text-gray-700">Relationship Type:</span>
          <span class="ml-2 text-gray-700">
            <% if @related_category.category.is_root? && @related_category.related_category.is_root? %>
              <span>Root ↔ Root</span>
            <% elsif @related_category.category.is_root? || @related_category.related_category.is_root? %>
              <span>Root ↔ Child</span>
            <% else %>
              <span>Child ↔ Child</span>
            <% end %>
          </span>
        </div>

        <div>
          <span class="font-semibold text-gray-700">Created:</span>
          <span class="ml-2"><%= l(@related_category.created_at, format: :long) %></span>
        </div>

        <div>
          <span class="font-semibold text-gray-700">Updated:</span>
          <span class="ml-2"><%= l(@related_category.updated_at, format: :long) %></span>
        </div>
      </div>
    </div>

    <div class="border-t border-gray-200 p-6">
      <h2 class="text-lg font-semibold text-gray-900 mb-4">Relationship Impact</h2>
      <div class="bg-gray-50 rounded p-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
          <div>
            <strong>Compatibility Level:</strong>
            <span class="<%= compatibility_level_color(@related_category.weight) %>"><%= compatibility_level_text(@related_category.weight) %></span>
          </div>
          <div>
            <strong>Bidirectional:</strong>
            <span class="text-green-600">Yes, works both ways</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
