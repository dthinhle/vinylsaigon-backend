<div class="bg-white rounded-lg border border-gray-200 flex flex-col sm:flex-row overflow-hidden">
  <div class="sm:w-60 flex flex-col items-center justify-start-safe p-4">
    <% if variant.images&.attached? %>
      <div class="grid grid-cols-2 grid-rows-2 gap-3">
        <% images = variant.images.to_a %>
        <% images.first(3).each do |img| %>
          <img src="<%= url_for(img) %>" alt="Variant Image"
            class="size-24 object-cover rounded border border-gray-300 transition duration-150 hover:scale-105 hover:shadow-md"
          />
        <% end %>
        <% if images.size > 3 %>
          <span class="flex items-center justify-center size-24 rounded-lg bg-gray-100 text-gray-600 text-xs font-semibold border border-gray-300 shadow">
            +<%= images.size - 3 %> more
          </span>
        <% end %>
      </div>
    <% else %>
      <span class="text-gray-400">No images</span>
    <% end %>
  </div>
  <div class="flex-1 p-4">
    <div class="mb-2">
      <span class="block text-base font-bold text-gray-800"><%= variant.name.presence || "—" %></span>
      <span class="block text-xs text-gray-500">SKU: <%= variant.sku.presence || "—" %></span>
    </div>
    <div class="mb-2">
      <% original_price = variant.original_price %>
      <span class="block text-sm text-gray-950 font-semibold"><%= original_price.present? ? format_price(original_price) : "—" %></span>
    </div>
    <div class="mb-2">
      <% current_price = variant.current_price %>
      <span class="block text-sm text-gray-950 font-semibold"><%= current_price.present? ? format_price(current_price) : "—" %></span>
    </div>
    <div class="mb-2">
      <% if variant.active? %>
        <span class="inline-block px-2 py-1 text-xs rounded bg-green-100 text-green-800">Active</span>
      <% else %>
        <span class="inline-block px-2 py-1 text-xs rounded bg-gray-200 text-gray-700">Inactive</span>
      <% end %>
    </div>
    <div class="mb-2">
      <span class="block text-xs text-gray-500">Sort: <%= variant.sort_order.present? ? variant.sort_order : "—" %></span>
    </div>
    <div class="mb-2">
      <span class="block text-xs font-semibold text-gray-600 mb-1">Attributes:</span>
      <% if variant.safe_variant_attributes.present? %>
        <div class="">
          <% variant.safe_variant_attributes.each do |k, v| %>
            <% value_str = v.to_s[0..Product::MAX_ATTRIBUTE_DISPLAY_LENGTH] %>
            <div class="py-1 rounded text-xs" title="<%= value_str %>">
              <b><%= k %>:</b> <%= v.length > Product::MAX_ATTRIBUTE_DISPLAY_LENGTH ? value_str + "..." : value_str %>
            </div>
          <% end %>
        </div>
      <% else %>
        <span class="text-gray-400">—</span>
      <% end %>
    </div>
  </div>
  <div class="sm:w-18 flex flex-row sm:flex-col items-center justify-center gap-3 p-4 border-l border-gray-200 bg-gray-50">
    <%= render_action_button(edit_admin_product_product_variant_path(product, variant), icon: 'edit', type: :edit) %>
    <button
      type="button"
      class="btn btn-xs border border-red-100 text-red-700 hover:border-red-200 px-2 py-1 rounded flex items-center justify-center cursor-pointer"
      title="Delete"
      aria-label="Delete"
      data-action="click->product-form#deleteVariant"
      data-variant-url="<%= admin_product_product_variant_path(product, variant) %>"
      data-confirm-message="Are you sure you want to delete this variant?">
      <span class="material-icons text-sm!" aria-label="Delete" title="Delete">delete</span>
    </button>
  </div>
</div>
