<div class="space-y-4">
  <div>
    <%= f.label :label, "Label", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.text_field :label, class: "input input-bordered w-full px-3 py-2 rounded border border-gray-300" , autofocus: (f.object.new_record?) %>
    <% if f.object.errors[:label].any? %>
      <p class="mt-1 text-sm text-red-600"><%= f.object.errors[:label].first %></p>
    <% end %>
  </div>

  <% if f.object.respond_to?(:item_type) %>
    <div>
      <%= f.label :item_type, "Type", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.select :item_type, options_for_select([["Link", "link"], ["Header", "header"]], f.object.item_type), {}, class: "select select-bordered w-full px-3 py-2 rounded border border-gray-300" %>
      <% if f.object.errors[:item_type].any? %>
        <p class="mt-1 text-sm text-red-600"><%= f.object.errors[:item_type].first %></p>
      <% end %>
    </div>
  <% end %>

  <div>
    <%= f.label :link, "Link (optional)", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.text_field :link, class: "input input-bordered w-full px-3 py-2 rounded border border-gray-300" %>
    <% if f.object.errors[:link].any? %>
      <p class="mt-1 text-sm text-red-600"><%= f.object.errors[:link].first %></p>
    <% end %>
  </div>

  <div data-controller="image-preview" data-image-preview-existing-images-value='<%= image_preview_data_for(f.object, attachment: :image, single: true) %>'>
    <%= f.label :image, "Image (optional)", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.file_field :image, accept: "image/*", class: "file-input file-input-bordered w-full", data: { action: "change->image-preview#preview", "image-preview-target": "input" } %>
    <div data-image-preview-target="previews" class="mt-2" role="region" aria-live="polite"></div>
    <% if f.object.errors[:image].any? %>
      <p class="mt-1 text-sm text-red-600"><%= f.object.errors[:image].first %></p>
    <% end %>
  </div>
</div>
